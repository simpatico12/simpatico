# =====================================
# 🏆 최고퀸트프로젝트 - 환경변수 설정
# =====================================
# 
# 이 파일을 복사하여 .env 파일을 만들고
# 실제 API 키와 설정값으로 교체하세요
#
# 사용법:
# 1. cp .env.example .env
# 2. .env 파일에서 실제 값으로 수정
# 3. .env 파일은 절대 Git에 커밋하지 마세요!
#
# Author: 최고퀸트팀
# Version: 2.0.0 (Enhanced Edition)
# Project: 최고퀸트프로젝트
# =====================================

# =====================================
# 🌍 기본 시스템 설정
# =====================================

# 환경 설정 (중요!)
ENVIRONMENT=development
# 옵션: development, testing, staging, production

# 프로젝트 모드
PROJECT_MODE=safe
# safe: 모의거래만, testing: 테스트 모드, live: 실거래

# 애플리케이션 이름
APP_NAME=QuantProject
APP_VERSION=2.0.0

# 시간대 설정
TIMEZONE=Asia/Seoul
# 다른 예: US/Eastern, Asia/Tokyo, UTC

# 언어 및 통화
LANGUAGE=ko
BASE_CURRENCY=KRW
QUOTE_CURRENCY=USD

# =====================================
# 🔐 보안 핵심 설정
# =====================================

# 마스터 암호화 키 (32바이트, 반드시 변경!)
MASTER_ENCRYPTION_KEY=CHANGE_THIS_32_CHAR_RANDOM_KEY_NOW
# 생성: python -c "import secrets; print(secrets.token_urlsafe(32))"

# JWT 시크릿 (웹 인터페이스용)
JWT_SECRET=CHANGE_THIS_JWT_SECRET_KEY_IMMEDIATELY
JWT_EXPIRATION_HOURS=24

# 세션 시크릿
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_RANDOM_STRING

# API 보안
API_KEY_ENCRYPTION=true
API_KEY_ROTATION_DAYS=30

# =====================================
# 📊 데이터베이스 설정
# =====================================

# 메인 데이터베이스 (SQLite 기본, PostgreSQL 권장)
DATABASE_URL=sqlite:///data/trading.db
# PostgreSQL 예시: postgresql://user:password@localhost:5432/trading_db
# MySQL 예시: mysql://user:password@localhost:3306/trading_db

# 데이터베이스 풀링 설정
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# 백업 데이터베이스
BACKUP_DATABASE_URL=sqlite:///backups/trading_backup.db

# Redis 캐시 (성능 향상)
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=20

# =====================================
# 📱 텔레그램 알림 시스템
# =====================================

# 텔레그램 봇 설정
TELEGRAM_ENABLED=true
TELEGRAM_BOT_TOKEN=1234567890:REPLACE_WITH_YOUR_ACTUAL_BOT_TOKEN
TELEGRAM_CHAT_ID=1234567890

# 알림 레벨 설정
TELEGRAM_NOTIFY_TRADES=true
TELEGRAM_NOTIFY_ERRORS=true
TELEGRAM_NOTIFY_DAILY_SUMMARY=true
TELEGRAM_NOTIFY_CRITICAL_ONLY=false

# 알림 시간 제한 (스팸 방지)
TELEGRAM_RATE_LIMIT=10
# 분당 최대 메시지 수

# 메시지 형식
TELEGRAM_MESSAGE_FORMAT=detailed
# 옵션: simple, detailed, technical

# =====================================
# 🪙 업비트 (Upbit) 거래소 설정
# =====================================

# 업비트 API 인증
UPBIT_ENABLED=true
UPBIT_ACCESS_KEY=REPLACE_WITH_YOUR_UPBIT_ACCESS_KEY
UPBIT_SECRET_KEY=REPLACE_WITH_YOUR_UPBIT_SECRET_KEY

# 업비트 거래 설정
UPBIT_PAPER_TRADING=true
# ⚠️ 실거래시 false로 변경 (신중히!)

UPBIT_ORDER_TYPE=limit
# 옵션: limit, market

# API 요청 제한 (업비트 정책 준수)
UPBIT_REQUESTS_PER_SECOND=8
UPBIT_REQUESTS_PER_MINUTE=100
UPBIT_ORDER_REQUESTS_PER_SECOND=1

# 거래 수수료 (백테스트용)
UPBIT_MAKER_FEE=0.0005
UPBIT_TAKER_FEE=0.0005

# 지원 코인 (쉼표로 구분)
UPBIT_TRADING_PAIRS=KRW-BTC,KRW-ETH,KRW-ADA,KRW-DOT,KRW-LINK
UPBIT_EXCLUDED_PAIRS=KRW-BTT,KRW-DOGE
# 제외할 코인들

# =====================================
# 🏦 Interactive Brokers (IBKR) 설정
# =====================================

# IBKR TWS 연결
IBKR_ENABLED=true
IBKR_TWS_HOST=127.0.0.1
IBKR_TWS_PORT=7497
# 7497: 모의거래, 7496: 실거래

IBKR_CLIENT_ID=1
IBKR_ACCOUNT_ID=REPLACE_WITH_YOUR_ACCOUNT_ID
# DU123456 (모의) 또는 U123456 (실거래)

# IBKR 거래 설정
IBKR_PAPER_TRADING=true
# ⚠️ 실거래시 false로 변경

IBKR_ORDER_TYPE=LMT
# LMT(지정가), MKT(시장가), STP(손절), etc.

# 연결 설정
IBKR_CONNECT_TIMEOUT=30
IBKR_REQUEST_TIMEOUT=10
IBKR_HEARTBEAT_INTERVAL=60

# 지원 시장
IBKR_MARKETS=SMART,NYSE,NASDAQ,TSE
IBKR_CURRENCIES=USD,JPY,KRW

# =====================================
# 💰 리스크 관리 시스템
# =====================================

# 전역 리스크 설정
MAX_PORTFOLIO_RISK=0.02
# 포트폴리오 전체 위험도 2%

MAX_POSITION_SIZE=0.05
# 개별 포지션 최대 5%

MAX_DAILY_LOSS=0.01
# 일일 최대 손실 1%

MAX_DRAWDOWN=0.1
# 최대 낙폭 10%

# 거래 제한
MAX_DAILY_TRADES=10
MAX_OPEN_POSITIONS=5
MIN_TRADE_AMOUNT_USD=100
MAX_TRADE_AMOUNT_USD=10000

# 손절/익절 설정
DEFAULT_STOP_LOSS=0.03
# 기본 손절 3%

DEFAULT_TAKE_PROFIT=0.06
# 기본 익절 6%

TRAILING_STOP_ENABLED=true
TRAILING_STOP_DISTANCE=0.02

# =====================================
# 📈 기술적 분석 전략 설정
# =====================================

# 기본 분석 설정
TA_ENABLED=true
TA_LOOKBACK_PERIOD=100
TA_MIN_CONFIDENCE=0.7

# 이동평균 설정
SMA_SHORT_PERIOD=20
SMA_LONG_PERIOD=50
EMA_FAST_PERIOD=12
EMA_SLOW_PERIOD=26

# RSI 설정
RSI_PERIOD=14
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70

# MACD 설정
MACD_FAST_PERIOD=12
MACD_SLOW_PERIOD=26
MACD_SIGNAL_PERIOD=9

# 볼린저 밴드
BB_PERIOD=20
BB_STD_DEV=2.0

# 스토캐스틱
STOCH_K_PERIOD=14
STOCH_D_PERIOD=3
STOCH_SMOOTH_K=3

# 일목균형표
ICHIMOKU_TENKAN=9
ICHIMOKU_KIJUN=26
ICHIMOKU_SENKOU_B=52

# Williams %R
WILLIAMS_R_PERIOD=14

# =====================================
# 🤖 AI/ML 전략 설정
# =====================================

# 머신러닝 활성화
ML_ENABLED=false
ML_MODEL_PATH=models/
ML_RETRAIN_INTERVAL_DAYS=7

# 사용할 ML 모델
ML_MODELS=random_forest,xgboost,lstm
ML_ENSEMBLE_VOTING=soft

# 특성 엔지니어링
FEATURE_LOOKBACK_DAYS=30
FEATURE_CORRELATION_THRESHOLD=0.95

# 모델 평가
ML_VALIDATION_SPLIT=0.2
ML_CROSS_VALIDATION_FOLDS=5
ML_MIN_MODEL_ACCURACY=0.65

# =====================================
# 🔄 백테스트 설정
# =====================================

# 백테스트 기간
BACKTEST_ENABLED=true
BACKTEST_START_DATE=2022-01-01
BACKTEST_END_DATE=2024-12-31

# 백테스트 옵션
BACKTEST_INITIAL_CAPITAL=100000
BACKTEST_COMMISSION=0.001
BACKTEST_SLIPPAGE=0.0005

# 성능 지표
BACKTEST_BENCHMARK=SPY
BACKTEST_RISK_FREE_RATE=0.02

# 워크아웃 기간
WALKFORWARD_ENABLED=true
WALKFORWARD_WINDOW_MONTHS=6
WALKFORWARD_STEP_MONTHS=1

# =====================================
# 📊 포트폴리오 할당
# =====================================

# 시장별 비중
US_STOCK_ALLOCATION=0.40
JP_STOCK_ALLOCATION=0.20
CRYPTO_ALLOCATION=0.30
CASH_ALLOCATION=0.10

# 섹터별 제한
MAX_SECTOR_EXPOSURE=0.25
# 특정 섹터 최대 25%

# 리밸런싱
REBALANCE_FREQUENCY=weekly
# daily, weekly, monthly, quarterly

REBALANCE_THRESHOLD=0.05
# 5% 이상 벗어나면 리밸런싱

# =====================================
# 📅 스케줄링 및 실행
# =====================================

# 거래 시간 (24시간 형식)
TRADING_START_HOUR=9
TRADING_END_HOUR=15
TRADING_TIMEZONE=Asia/Seoul

# 프리마켓/애프터아워 거래
PREMARKET_TRADING=false
AFTERHOURS_TRADING=false

# 실행 간격
PRICE_UPDATE_INTERVAL=30
# 가격 업데이트 간격 (초)

SIGNAL_CHECK_INTERVAL=300
# 신호 체크 간격 (초)

PORTFOLIO_UPDATE_INTERVAL=3600
# 포트폴리오 업데이트 간격 (초)

# 주말/휴일 처리
WEEKEND_TRADING=false
HOLIDAY_TRADING=false

# =====================================
# 📝 로깅 및 모니터링
# =====================================

# 로그 설정
LOG_LEVEL=INFO
# DEBUG, INFO, WARNING, ERROR, CRITICAL

LOG_FORMAT=detailed
# simple, detailed, json

LOG_FILE_SIZE_MB=100
LOG_BACKUP_COUNT=10
LOG_ROTATION=daily

# 로그 경로
LOG_DIR=logs
LOG_FILE=trading.log
ERROR_LOG_FILE=errors.log
TRADE_LOG_FILE=trades.log

# 성능 모니터링
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60

# 시스템 알림 임계값
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90

# =====================================
# 🌐 외부 데이터 소스
# =====================================

# 야후 파이낸스
YAHOO_FINANCE_ENABLED=true
YAHOO_REQUEST_DELAY=1

# 알파벤티지 (선택사항)
ALPHA_VANTAGE_ENABLED=false
ALPHA_VANTAGE_API_KEY=REPLACE_WITH_YOUR_AV_KEY

# 퀀들 (선택사항)
QUANDL_ENABLED=false
QUANDL_API_KEY=REPLACE_WITH_YOUR_QUANDL_KEY

# Fred 경제 데이터
FRED_ENABLED=false
FRED_API_KEY=REPLACE_WITH_YOUR_FRED_KEY

# 환율 API
EXCHANGE_RATE_API_ENABLED=false
EXCHANGE_RATE_API_KEY=REPLACE_WITH_YOUR_EXCHANGE_RATE_KEY

# =====================================
# 🗄️ 데이터 저장 및 백업
# =====================================

# 데이터 디렉토리
DATA_DIR=data
PRICE_DATA_DIR=data/prices
TRADE_DATA_DIR=data/trades
MODEL_DATA_DIR=data/models
REPORT_DIR=reports

# 데이터 보관 기간
PRICE_DATA_RETENTION_DAYS=1095
# 3년간 가격 데이터 보관

TRADE_DATA_RETENTION_DAYS=2555
# 7년간 거래 데이터 보관

LOG_DATA_RETENTION_DAYS=365
# 1년간 로그 데이터 보관

# 자동 백업
AUTO_BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# 클라우드 백업 (선택사항)
CLOUD_BACKUP_ENABLED=false
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_S3_BUCKET=your_backup_bucket
# AWS_REGION=us-east-1

# =====================================
# 🌐 웹 인터페이스 (대시보드)
# =====================================

# 웹 서버 설정
WEB_ENABLED=false
WEB_HOST=127.0.0.1
WEB_PORT=8000
WEB_DEBUG=false

# 인증 설정
WEB_AUTH_REQUIRED=true
WEB_USERNAME=admin
WEB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# 세션 설정
WEB_SESSION_TIMEOUT=3600
WEB_CONCURRENT_SESSIONS=1

# API 엔드포인트
API_ENABLED=false
API_RATE_LIMIT=100
# 분당 요청 제한

# =====================================
# 📧 알림 시스템 확장
# =====================================

# 이메일 알림 (선택사항)
EMAIL_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_USE_TLS=true

# 슬랙 알림 (선택사항)
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/your/webhook/url
SLACK_CHANNEL=#trading-alerts

# 디스코드 알림 (선택사항)
DISCORD_ENABLED=false
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/webhook

# 알림 스케줄
DAILY_REPORT_TIME=18:00
WEEKLY_REPORT_DAY=sunday
MONTHLY_REPORT_DAY=1

# =====================================
# 🚀 성능 및 확장성
# =====================================

# 멀티프로세싱
MAX_WORKERS=4
MULTIPROCESSING_ENABLED=true

# 비동기 처리
ASYNC_ENABLED=true
ASYNC_BATCH_SIZE=100

# 캐싱
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# 큐 시스템 (고급 기능)
QUEUE_ENABLED=false
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# 스레드 풀
THREAD_POOL_SIZE=10

# =====================================
# 🧪 개발 및 테스트
# =====================================

# 개발 모드
DEBUG_MODE=false
VERBOSE_LOGGING=false

# 테스트 설정
TEST_MODE=false
TEST_DATA_ENABLED=false
MOCK_TRADING_ENABLED=true

# 시뮬레이션 설정
SIMULATION_SPEED=1.0
# 1.0 = 실시간, 2.0 = 2배속

# 개발 도구
PROFILING_ENABLED=false
MEMORY_PROFILING=false

# =====================================
# 🔧 고급 전략 설정
# =====================================

# 멀티 전략
STRATEGY_ENABLED=true
STRATEGY_ENSEMBLE=true
STRATEGY_WEIGHTS=equal
# equal, performance, risk_adjusted

# 전략별 설정
MOMENTUM_STRATEGY_ENABLED=true
MEAN_REVERSION_STRATEGY_ENABLED=true
BREAKOUT_STRATEGY_ENABLED=true
ARBITRAGE_STRATEGY_ENABLED=false

# 신호 필터링
SIGNAL_FILTERING_ENABLED=true
MIN_SIGNAL_STRENGTH=0.6
SIGNAL_CONFIRMATION_REQUIRED=true

# 적응적 파라미터
ADAPTIVE_PARAMETERS=true
PARAMETER_OPTIMIZATION_INTERVAL=30
# 30일마다 파라미터 최적화

# =====================================
# 💡 실험적 기능
# =====================================

# 센티멘트 분석
SENTIMENT_ANALYSIS_ENABLED=false
NEWS_SENTIMENT_WEIGHT=0.1

# 고주파 거래
HFT_ENABLED=false
HFT_LATENCY_TARGET_MS=10

# 암호화폐 DeFi
DEFI_ENABLED=false
DEFI_YIELD_FARMING=false

# 옵션 거래
OPTIONS_TRADING_ENABLED=false
OPTIONS_STRATEGIES=covered_call,protective_put

# =====================================
# 📋 준수 및 규정
# =====================================

# 규정 준수
COMPLIANCE_ENABLED=true
POSITION_REPORTING=true
TRADE_SURVEILLANCE=true

# 세무 처리
TAX_REPORTING_ENABLED=true
TAX_YEAR_END=12-31
TAX_JURISDICTION=KR

# 감사 로그
AUDIT_LOGGING=true
AUDIT_LOG_ENCRYPTION=true

# =====================================
# 🎛️ 사용자 정의 설정
# =====================================

# 사용자 전략 스크립트
CUSTOM_STRATEGY_DIR=strategies/custom
CUSTOM_INDICATOR_DIR=indicators/custom

# 플러그인 시스템
PLUGIN_ENABLED=false
PLUGIN_DIR=plugins

# 커스텀 알림
CUSTOM_ALERTS_ENABLED=true
CUSTOM_ALERT_SCRIPTS_DIR=alerts/custom

# =====================================
# 🔍 디버깅 및 문제해결
# =====================================

# 디버그 출력
PRINT_SIGNALS=false
PRINT_TRADES=false
PRINT_ERRORS=true

# 상세 로깅
LOG_API_REQUESTS=false
LOG_API_RESPONSES=false
LOG_EXECUTION_TIME=false

# 문제해결 모드
TROUBLESHOOT_MODE=false
SAVE_DEBUG_DATA=false

# =====================================
# 📖 사용 가이드
# =====================================

# 이 설정 파일 사용법:
#
# 1. 초기 설정 (필수):
#    - 모든 "REPLACE_WITH_YOUR_" 값들을 실제 값으로 변경
#    - MASTER_ENCRYPTION_KEY 등 보안 키 생성
#    - API 키들을 발급받아 입력
#
# 2. 안전한 시작:
#    - PROJECT_MODE=safe 유지
#    - 모든 PAPER_TRADING=true 유지
#    - 충분한 테스트 후 실거래 고려
#
# 3. 점진적 확장:
#    - 기본 기능 테스트 → 고급 기능 활성화
#    - 단일 전략 → 멀티 전략
#    - 단일 시장 → 멀티 시장
#
# 4. 성능 최적화:
#    - 로그 레벨 조정
#    - 캐시 및 비동기 처리 활성화
#    - 멀티프로세싱 활용
#
# ⚠️ 중요 보안 수칙:
# - .env 파일을 Git에 커밋하지 마세요!
# - API 키는 최소 권한으로 설정하세요!
# - 정기적으로 키를 갱신하세요!
# - 실거래 전 충분한 테스트를 진행하세요!
#
# 📞 지원:
# - README.md 문서 참조
# - GitHub Issues 활용
# - 커뮤니티 포럼 참여

# =====================================
# ✅ 설정 검증 체크리스트
# =====================================

# □ API 키들이 모두 설정되었는가?
# □ 보안 키들이 기본값에서 변경되었는가?
# □ 거래 모드가 안전 모드인가?
# □ 리스크 관리 설정이 적절한가?
# □ 백업 설정이 활성화되어 있는가?
# □ 알림 시스템이 제대로 설정되었는가?
# □ 로그 경로가 존재하는가?
# □ 데이터 디렉토리가 생성되었는가?

# =====================================
