# ================================================================================================
# 🏆 퀸트프로젝트 통합 환경설정 - 4가지 전략 (미국/일본/인도/암호화폐)
# ================================================================================================
# 각 전략별 설정을 독립적으로 관리하며, 필요한 전략만 활성화하여 사용할 수 있습니다.
# 사용하지 않는 전략의 API 키는 비워두셔도 됩니다.

# ================================================================================================
# 🚨 응급 오류 감지 시스템 (NEW!)
# ================================================================================================
# 응급 매도 시스템 활성화
EMERGENCY_SELL_ON_ERROR=true

# 시스템 리소스 임계치
EMERGENCY_MEMORY_THRESHOLD=95    # 메모리 95% 이상
EMERGENCY_CPU_THRESHOLD=90       # CPU 90% 이상 (5분 연속)
EMERGENCY_DISK_THRESHOLD=5       # 디스크 여유공간 5GB 미만

# 오류 감지 설정
EMERGENCY_ERROR_COUNT=5          # 연속 오류 5회 시 응급매도
EMERGENCY_GRACE_PERIOD=60        # 응급매도 전 유예시간 (초)

# 환율 API (응급시 알림용)
EXCHANGE_RATE_API_KEY=your_exchange_rate_api_key_here

# ================================================================================================
# 🇺🇸 미국 주식 전략 (IBKR) - legendary_quant_v63.py
# ================================================================================================
# Interactive Brokers API 설정
IBKR_ENABLED=true
IBKR_HOST=127.0.0.1
IBKR_PORT=7497
IBKR_CLIENT_ID=1
IBKR_PAPER_TRADING=true
IBKR_MAX_DAILY_TRADES=20

# 미국 전략 설정
US_STRATEGY_ENABLED=true
US_CURRENT_MODE=swing
US_WEEKLY_MODE=true
US_TARGET_STOCKS_SWING=8
US_TARGET_STOCKS_CLASSIC=20
US_MONTHLY_TARGET_MIN=5.0
US_MONTHLY_TARGET_MAX=7.0

# 미국 위험관리
US_MAX_POSITION=15.0
US_DAILY_LOSS_LIMIT=1.0
US_MONTHLY_LOSS_LIMIT=3.0
US_WEEKLY_LOSS_LIMIT=3.0

# 미국 화목 매매 설정
US_TUESDAY_TARGETS=4
US_THURSDAY_TARGETS=2
US_TUESDAY_ALLOCATION=12.5
US_THURSDAY_ALLOCATION=8.0
US_TUESDAY_TIME=10:30
US_THURSDAY_TIME=10:30

# ================================================================================================
# 🇯🇵 일본 주식 전략 (IBKR) - jp_strategy.py
# ================================================================================================
# 일본 전략 설정
JAPAN_STRATEGY_ENABLED=true
JAPAN_MONTHLY_TARGET=0.14
JAPAN_MONTHLY_SAFE=0.10
JAPAN_MONTHLY_LIMIT=-0.05

# 엔화 임계값
YEN_STRONG_THRESHOLD=105.0
YEN_WEAK_THRESHOLD=110.0

# 일본 종목 선별
JAPAN_MIN_MARKET_CAP=500000000000
JAPAN_TARGET_STOCKS=15

# 화목 하이브리드 매매
JAPAN_TRADING_DAYS=1,3
JAPAN_TUESDAY_MAX_HOLD=5
JAPAN_THURSDAY_MAX_HOLD=2
JAPAN_MAX_TUESDAY_TRADES=2
JAPAN_MAX_THURSDAY_TRADES=3

# 매수 임계값
JAPAN_BUY_THRESHOLD_TUESDAY=0.75
JAPAN_BUY_THRESHOLD_THURSDAY=0.65

# ================================================================================================
# 🇮🇳 인도 주식 전략 (IBKR) - inda_strategy.py
# ================================================================================================
# 인도 전략 설정
INDIA_STRATEGY_ENABLED=true
INDIA_CONSERVATIVE_MODE=true
INDIA_MONTHLY_TARGET=0.06
INDIA_WEEKLY_TARGET=0.015

# 인도 수요일 전용 매매
INDIA_WEDNESDAY_ONLY=true
INDIA_MAX_STOCKS=4
INDIA_MAX_INVESTMENT_PER_STOCK=0.20

# 안정형 손익절 설정
INDIA_NIFTY50_STOP=0.03
INDIA_NIFTY50_PROFIT=0.06
INDIA_SENSEX_STOP=0.03
INDIA_SENSEX_PROFIT=0.06
INDIA_NEXT50_STOP=0.04
INDIA_NEXT50_PROFIT=0.08
INDIA_SMALLCAP_STOP=0.05
INDIA_SMALLCAP_PROFIT=0.10

# ================================================================================================
# 💰 암호화폐 전략 (업비트) - coin_strategy.py
# ================================================================================================
# 업비트 API 설정
UPBIT_ACCESS_KEY=your_upbit_access_key_here
UPBIT_SECRET_KEY=your_upbit_secret_key_here

# 암호화폐 전략 설정
CRYPTO_STRATEGY_ENABLED=true
CRYPTO_DEMO_MODE=true
CRYPTO_PORTFOLIO_VALUE=100000000
CRYPTO_MIN_VOLUME=5000000000
CRYPTO_TARGET_PORTFOLIO_SIZE=8

# 월 5-7% 최적화 설정
CRYPTO_MONTHLY_TARGET_MIN=5.0
CRYPTO_MONTHLY_TARGET_MAX=7.0

# 월금 매매 설정
CRYPTO_MONDAY_BUY=true
CRYPTO_FRIDAY_SELL=true
CRYPTO_EMERGENCY_SELL=true

# 3단계 분할 진입
CRYPTO_STAGE1_RATIO=0.40
CRYPTO_STAGE2_RATIO=0.35
CRYPTO_STAGE3_RATIO=0.25

# 익절 설정 (0차 추가, 3차 삭제)
CRYPTO_TAKE_PROFIT_0=4,5,6
CRYPTO_TAKE_PROFIT_1=10,12,15
CRYPTO_TAKE_PROFIT_2=15,20,25

# 손절 설정 (타이트)
CRYPTO_STOP_LOSS_HIGH_QUALITY=5
CRYPTO_STOP_LOSS_MID_QUALITY=7
CRYPTO_STOP_LOSS_LOW_QUALITY=8

# ================================================================================================
# 📱 알림 설정 (모든 전략 공통)
# ================================================================================================
# 텔레그램 알림
TELEGRAM_ENABLED=true
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# 이메일 알림 (선택사항)
EMAIL_ENABLED=false
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your_email@gmail.com
EMAIL_PASSWORD=your_app_password_here
EMAIL_TO=your_email@gmail.com

# 슬랙 알림 (선택사항)
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=your_slack_webhook_url_here

# ================================================================================================
# 🛡️ 리스크 관리 설정 (모든 전략 공통)
# ================================================================================================
# 전체 포트폴리오 리스크
TOTAL_PORTFOLIO_VALUE=1000000000
MAX_PORTFOLIO_RISK=0.05
EMERGENCY_STOP_ENABLED=true

# 네트워크 연결 모니터링
NETWORK_MONITORING_ENABLED=true
NETWORK_CHECK_INTERVAL=30
NETWORK_TIMEOUT=10
NETWORK_MAX_FAILURES=3
NETWORK_RETRY_COUNT=3

# 네트워크 끊김 시 전량매도 설정
NETWORK_DISCONNECT_SELL_ALL=false
NETWORK_GRACE_PERIOD=300

# API 연결 실패 시 설정
API_FAILURE_SELL_ALL=false
API_FAILURE_RETRY_COUNT=5
API_FAILURE_GRACE_PERIOD=600

# ================================================================================================
# 🔄 자동화 설정
# ================================================================================================
# 전략별 실행 스케줄
AUTO_TRADING_ENABLED=true
US_STRATEGY_SCHEDULE=0 10 * * 1,4
JAPAN_STRATEGY_SCHEDULE=30 10 * * 1,3
INDIA_STRATEGY_SCHEDULE=0 9 * * 2
CRYPTO_STRATEGY_SCHEDULE=0 9 * * 0,4

# 모니터링 간격 (초)
POSITION_CHECK_INTERVAL=180
PRICE_UPDATE_INTERVAL=60
RISK_CHECK_INTERVAL=120

# 로그 설정
LOG_LEVEL=INFO
LOG_FILE_PATH=./logs/quant_strategy.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# ================================================================================================
# 📊 데이터베이스 설정
# ================================================================================================
# 성과 추적 데이터베이스
DATABASE_ENABLED=true
DATABASE_TYPE=sqlite
DATABASE_PATH=./data/quint_core.db

# 백업 설정
BACKUP_ENABLED=true
BACKUP_INTERVAL=daily
BACKUP_RETENTION_DAYS=90
BACKUP_PATH=./backups/

# ================================================================================================
# 🔧 고급 설정
# ================================================================================================
# API 제한 설정
API_RATE_LIMIT=100
API_RATE_WINDOW=60
API_CONCURRENT_REQUESTS=5

# 메모리 관리
MAX_MEMORY_USAGE=2048
CACHE_SIZE=1000
DATA_RETENTION_DAYS=365

# 성능 모니터링
PERFORMANCE_MONITORING=true
PERFORMANCE_LOG_INTERVAL=3600

# ================================================================================================
# 📝 사용법 안내
# ================================================================================================
# 1. 이 파일을 .env로 복사하세요: cp .env.example .env
# 2. 사용할 전략의 API 키를 입력하세요
# 3. 필요한 전략만 ENABLED=true로 설정하세요
# 4. 리스크 설정을 본인의 투자 성향에 맞게 조정하세요
# 5. 텔레그램 봇을 설정하여 알림을 받으세요

# ================================================================================================
# ⚠️ 보안 주의사항
# ================================================================================================
# - .env 파일은 절대 git에 커밋하지 마세요
# - API 키는 안전한 곳에 별도 보관하세요
# - 정기적으로 API 키를 교체하세요
# - 실제 거래 전에 반드시 시뮬레이션으로 테스트하세요

# ================================================================================================
# 🆘 응급 상황 대응
# ================================================================================================
# 응급 정지 설정
EMERGENCY_STOP_HOTKEY=Ctrl+Alt+E
EMERGENCY_STOP_PHONE=your_phone_number
EMERGENCY_CONTACT_EMAIL=emergency@yourcompany.com

# 시장 크래시 대응
MARKET_CRASH_THRESHOLD=-0.10
MARKET_CRASH_ACTION=pause_all
VOLATILITY_THRESHOLD=0.05
VOLATILITY_ACTION=reduce_positions

# ================================================================================================
# 🎯 전략별 우선순위
# ================================================================================================
# 전략 실행 우선순위 (1=최고)
US_STRATEGY_PRIORITY=1
JAPAN_STRATEGY_PRIORITY=2
CRYPTO_STRATEGY_PRIORITY=3
INDIA_STRATEGY_PRIORITY=4

# 자원 배분 비율
US_STRATEGY_ALLOCATION=0.40
JAPAN_STRATEGY_ALLOCATION=0.25
CRYPTO_STRATEGY_ALLOCATION=0.20
INDIA_STRATEGY_ALLOCATION=0.15
