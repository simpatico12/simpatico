# ================================================================
# ğŸ† 4ëŒ€ ì „ì„¤ì  í€€íŠ¸ ì „ëµ í†µí•© settings.yaml
# ================================================================
# ğŸ‡ºğŸ‡¸ ë¯¸êµ­ì£¼ì‹ + ğŸª™ ì—…ë¹„íŠ¸ + ğŸ‡¯ğŸ‡µ ì¼ë³¸ì£¼ì‹ + ğŸ‡®ğŸ‡³ ì¸ë„ì£¼ì‹
# ëª¨ë“  ì „ëµì˜ ì„¸ë¶€ ì„¤ì •ì„ í•œ íŒŒì¼ì—ì„œ ê´€ë¦¬
# ================================================================

# ================================================================
# ğŸ”§ ê¸°ë³¸ ì‹œìŠ¤í…œ ì„¤ì •
# ================================================================
system:
  environment: "production"  # development, staging, production
  project_mode: "live_trading"  # simulation, paper_trading, live_trading
  debug_mode: false
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  timezone: "UTC"
  language: "ko"
  
  # ë°±ì—… ì„¤ì •
  backup:
    enabled: true
    interval_hours: 24
    retention_days: 30
    location: "./backups"
    compress: true

# ================================================================
# ğŸ“Š ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬ ì„¤ì •
# ================================================================
data:
  # ì¼ë°˜ ì„¤ì •
  update_interval_seconds: 60
  cache_ttl_seconds: 300
  max_retries: 3
  request_timeout: 30
  rate_limit_delay: 0.3
  
  # ë°ì´í„° ì†ŒìŠ¤ ìš°ì„ ìˆœìœ„
  sources:
    primary: "yfinance"
    fallback: ["alpha_vantage", "finnhub"]
    
  # ë°ì´í„° ì €ì¥
  storage:
    local_cache: true
    database_save: true
    file_export: false
    compression: "gzip"

# ================================================================
# ğŸ‡ºğŸ‡¸ ë¯¸êµ­ ì£¼ì‹ ì„¤ì • (IBKR)
# ================================================================
us_stocks:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  market_hours:
    open: "09:30"
    close: "16:00"
    timezone: "America/New_York"
    
  # ì „ì„¤ì  í€¸íŠ¸ ì „ëµ V6.0
  legendary_strategy:
    enabled: true
    target_stocks: 20
    selection_cache_hours: 24
    confidence_threshold: 0.70
    
    # 4ê°€ì§€ ì „ëµ ê°€ì¤‘ì¹˜ (ì´í•© 100%)
    strategy_weights:
      buffett_value: 25.0
      lynch_growth: 25.0
      momentum: 25.0
      technical: 25.0
    
    # VIX ê¸°ë°˜ ì‹œì¥ íŒë‹¨
    vix_thresholds:
      low_volatility: 15.0
      high_volatility: 30.0
      adjustments:
        low_boost: 1.15
        normal: 1.0
        high_reduce: 0.85
  
  # ë¶„í• ë§¤ë§¤ ì‹œìŠ¤í…œ
  split_trading:
    enabled: true
    buy_stages:
      stage1_ratio: 40.0
      stage2_ratio: 35.0
      stage3_ratio: 25.0
    triggers:
      stage2_drop: -5.0
      stage3_drop: -10.0
    sell_stages:
      profit1_ratio: 60.0
      profit2_ratio: 40.0
  
  # ì¢…ëª© ì„ ë³„ ê¸°ì¤€
  selection_criteria:
    min_market_cap: 5_000_000_000  # 50ì–µ ë‹¬ëŸ¬
    min_avg_volume: 1_000_000
    max_per_sector: 4
    sp500_quota: 60.0
    nasdaq_quota: 40.0
    excluded_symbols: ["SPXL", "TQQQ", "SQQQ"]
    excluded_sectors: []
  
  # ë¦¬ìŠ¤í¬ ê´€ë¦¬
  risk_management:
    portfolio_allocation: 80.0
    cash_reserve: 20.0
    stop_loss: 15.0
    take_profit1: 20.0
    take_profit2: 35.0
    max_position: 8.0
    max_sector: 25.0
    max_hold_days: 60

# ================================================================
# ğŸª™ ì—…ë¹„íŠ¸ ì•”í˜¸í™”í ì„¤ì •
# ================================================================
upbit_crypto:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  market_hours:
    open: "00:00"
    close: "24:00"
    timezone: "Asia/Seoul"
    
  # 5ëŒ€ ì‹œìŠ¤í…œ í†µí•© ì „ëµ
  legendary_systems:
    neural_quality:
      enabled: true
      weights: [0.30, 0.30, 0.20, 0.20]  # ê¸°ìˆ ë ¥, ìƒíƒœê³„, ì»¤ë®¤ë‹ˆí‹°, ì±„íƒë„
      volume_bonus_threshold: 100_000_000_000  # 1000ì–µì›
      
    quantum_cycle:
      enabled: true
      analysis_period: 90  # 90ì¼
      macro_period: 60
      meso_period: 14
      micro_period: 3
      
    fractal_filtering:
      enabled: true
      volume_filter_cv: 2.0  # ë³€ë™ê³„ìˆ˜ 2.0 ì´í•˜
      price_stability_cv: 0.3  # ê°€ê²© ë³€ë™ì„± 30% ì´í•˜
      momentum_weight: [0.7, 0.3]  # 7ì¼, 30ì¼ ëª¨ë©˜í…€
      
    diamond_hand:
      enabled: true
      kelly_max_ratio: 0.25
      emotion_factors:
        strong_bull: 1.2
        momentum_phase: 1.1
        accumulation: 1.0
        reversal_phase: 0.9
        strong_bear: 0.8
        
    correlation_web:
      enabled: true
      optimization_method: "network"
      max_correlation: 0.7
      rebalance_threshold: 0.1
  
  # í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ì •
  portfolio:
    total_value: 100_000_000  # 1ì–µì›
    min_volume_krw: 10_000_000_000  # 100ì–µì›
    target_coins: 8
    max_position_percent: 15.0
    
  # ë¶„í• ë§¤ë§¤ ë° ë¦¬ìŠ¤í¬ ê´€ë¦¬
  trading:
    stage_ratios: [40, 35, 25]  # 3ë‹¨ê³„ ë¶„í• 
    drop_triggers: [-5, -10]  # 5%, 10% í•˜ë½ì‹œ ì¶”ê°€ ë§¤ìˆ˜
    stop_loss_percent: 15
    take_profit_levels: [20, 35]
    trailing_stop_ratio: 10
    max_hold_days: 30

# ================================================================
# ğŸ‡¯ğŸ‡µ ì¼ë³¸ ì£¼ì‹ ì„¤ì • (YEN-HUNTER)
# ================================================================
japan_stocks:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  market_hours:
    open: "09:00"
    close: "15:00"
    timezone: "Asia/Tokyo"
    
  # YEN-HUNTER ì „ëµ (TOPIX+JPX400 ì—…ê·¸ë ˆì´ë“œ)
  yen_hunter:
    enabled: true
    yen_thresholds:
      strong: 105.0  # ì—”í™” ê°•ì„¸ (ë‚´ìˆ˜ì£¼ ìœ ë¦¬)
      weak: 110.0    # ì—”í™” ì•½ì„¸ (ìˆ˜ì¶œì£¼ ìœ ë¦¬)
    
    # 3ê°œ ì§€ìˆ˜ í†µí•© ì„¤ì •
    index_hunting:
      nikkei225:
        enabled: true
        weight: 40.0
        max_stocks: 50
      topix:
        enabled: true
        weight: 35.0
        max_stocks: 100
      jpx400:
        enabled: true
        weight: 25.0
        max_stocks: 80
    
    # ì„ ë³„ ê¸°ì¤€
    selection:
      min_market_cap: 500_000_000_000  # 5000ì–µì—”
      target_stocks: 15
      buy_threshold: 0.7
      min_volume: 1_000_000
    
    # ì „ì„¤ê¸‰ ê¸°ìˆ ì§€í‘œ (8ê°œ)
    legendary_indicators:
      rsi: { period: 14, oversold: 30, overbought: 70 }
      macd: { fast: 12, slow: 26, signal: 9 }
      bollinger: { period: 20, std_dev: 2.0 }
      stochastic: { k_period: 14, d_period: 3 }
      atr: { period: 14 }
      momentum: { period: 10 }
      fibonacci: { period: 50 }
      volume_analysis: { period: 20 }
  
  # ë¦¬ìŠ¤í¬ ê´€ë¦¬ (ATR ê¸°ë°˜)
  risk_management:
    atr_based_stops: true
    high_volatility_threshold: 0.03
    low_volatility_threshold: 0.015
    confidence_multipliers:
      high: 1.2
      medium: 1.0
      low: 0.7
    max_hold_days: 45
    portfolio_heat: 2.0  # í¬íŠ¸í´ë¦¬ì˜¤ íˆíŠ¸

# ================================================================
# ğŸ‡®ğŸ‡³ ì¸ë„ ì£¼ì‹ ì„¤ì • (5ëŒ€ íˆ¬ìê±°ì¥)
# ================================================================
india_stocks:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  market_hours:
    open: "09:15"
    close: "15:30"
    timezone: "Asia/Kolkata"
    
  # 5ëŒ€ ì „ì„¤ íˆ¬ìì ì „ëµ
  legendary_investors:
    # ë¼ì¼€ì‹œ ì¤€ì¤€ì™ˆë¼ (ì›ŒëŸ° ë²„í• í‚¬ëŸ¬)
    rakesh_jhunjhunwala:
      enabled: true
      weight: 25.0
      roe_threshold: 15.0
      promoter_holding_min: 30.0
      promoter_pledge_max: 15.0
      
    # ë¼ë©”ë°ì˜¤ ì•„ê·¸ë¼ì™ˆ (QGLP)
    raamdeo_agrawal:
      enabled: true
      weight: 25.0
      quality_weight: 30.0
      growth_weight: 30.0
      longevity_weight: 20.0
      price_weight: 20.0
      
    # ë¹„ì œì´ ì¼€ë””ì•„ (SMILE)
    vijay_kedia:
      enabled: true
      weight: 20.0
      small_to_large: true
      growth_threshold: 30.0
      market_share_focus: true
      
    # í¬ë¦¬ë‰´ ë²¨ë¦¬ì•¼ìŠ¤ (ì½˜íŠ¸ë¼ë¦¬ì•ˆ)
    porinju_veliyath:
      enabled: true
      weight: 15.0
      neglected_stock_bonus: 2.0
      hidden_asset_ratio: 0.3
      contrarian_signals: true
      
    # ë‹ˆí‹´ ì¹´ë¥´ë‹‰ (ì¸í”„ë¼ ì œì™•)
    nitin_karnik:
      enabled: true
      weight: 15.0
      infra_sectors: ["Infrastructure", "Construction", "Power", "Roads", "Railways"]
      policy_beneficiary_bonus: 2.0
      midcap_focus: true
  
  # 4ê°œ ì§€ìˆ˜ í†µí•© ì„¤ì •
  index_integration:
    nifty50:
      enabled: true
      weight: 40.0
      stability_focus: true
    sensex:
      enabled: true
      weight: 30.0
      quality_focus: true
    nifty_next50:
      enabled: true
      weight: 20.0
      growth_focus: true
    nifty_smallcap:
      enabled: true
      weight: 10.0
      value_focus: true
  
  # 14ê°œ ì „ì„¤ê¸‰ ê¸°ìˆ ì§€í‘œ
  legendary_indicators:
    basic_indicators:
      - { name: "bollinger_bands", period: 20, std_dev: 2.0 }
      - { name: "macd", fast: 12, slow: 26, signal: 9 }
      - { name: "adx", period: 14 }
      - { name: "stochastic", k_period: 14, d_period: 3 }
      - { name: "rsi", period: 14 }
      
    advanced_indicators:
      - { name: "ichimoku_cloud", tenkan: 9, kijun: 26, senkou_b: 52 }
      - { name: "elliott_wave", lookback: 50 }
      - { name: "vwap_advanced", period: 20 }
      - { name: "market_profile", period: 20 }
      - { name: "money_flow_index", period: 14 }
      - { name: "williams_r", period: 14 }
      - { name: "commodity_channel_index", period: 20 }
      - { name: "ultimate_oscillator", periods: [7, 14, 28] }
      - { name: "klinger_oscillator", fast: 34, slow: 55 }
  
  # í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
  portfolio:
    total_value: 10_000_000  # 1000ë§Œì›
    target_stocks: 10
    min_market_cap: 5_000_000_000  # 50ì–µë£¨í”¼
    max_position_percent: 10.0
    diversification_bonus: true

# ================================================================
# ğŸ“± ì•Œë¦¼ ì‹œìŠ¤í…œ ì„¤ì •
# ================================================================
notifications:
  # í…”ë ˆê·¸ë¨
  telegram:
    enabled: true
    send_signals: true
    send_trades: true
    send_daily_report: true
    send_errors: true
    quiet_hours:
      start: "22:00"
      end: "07:00"
      
  # ë””ìŠ¤ì½”ë“œ
  discord:
    enabled: false
    send_portfolio_updates: true
    send_major_signals: true
    
  # ìŠ¬ë™
  slack:
    enabled: false
    send_system_status: true
    send_errors: true
    
  # ì´ë©”ì¼
  email:
    enabled: false
    daily_report: true
    weekly_summary: true
    error_alerts: true

# ================================================================
# ğŸŒ ì›¹ ëŒ€ì‹œë³´ë“œ ì„¤ì •
# ================================================================
dashboard:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  host: "0.0.0.0"
  port: 8080
  debug: false
  
  # ì¸ì¦
  authentication:
    enabled: true
    session_timeout_hours: 24
    max_login_attempts: 5
    
  # ëŒ€ì‹œë³´ë“œ êµ¬ì„±
  layout:
    theme: "dark"
    refresh_interval: 30  # seconds
    charts:
      - "portfolio_performance"
      - "market_overview"
      - "active_signals"
      - "risk_metrics"
      - "trade_history"
    
  # ì„±ëŠ¥ ìµœì í™”
  performance:
    cache_duration: 300  # seconds
    lazy_loading: true
    compression: true

# ================================================================
# ğŸ”„ ìŠ¤ì¼€ì¤„ë§ ì„¤ì •
# ================================================================
scheduler:
  # ì‹œì¥ ìŠ¤ìº”
  market_scan:
    enabled: true
    us_schedule: "0 9 * * 1-5"      # ë¯¸êµ­ ì¥ ì‹œì‘ ì „
    kr_schedule: "0 8 * * 1-5"      # í•œêµ­ ì¥ ì‹œì‘ ì „
    jp_schedule: "0 8 * * 1-5"      # ì¼ë³¸ ì¥ ì‹œì‘ ì „
    in_schedule: "0 9 * * 1-5"      # ì¸ë„ ì¥ ì‹œì‘ ì „
    
  # í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹±
  rebalancing:
    enabled: true
    schedule: "0 21 * * 5"          # ë§¤ì£¼ ê¸ˆìš”ì¼ ë°¤
    threshold: 5.0                  # 5% ì´ìƒ ì°¨ì´ì‹œ ë¦¬ë°¸ëŸ°ì‹±
    
  # ë¦¬ìŠ¤í¬ ì²´í¬
  risk_check:
    enabled: true
    schedule: "*/30 * * * *"        # 30ë¶„ë§ˆë‹¤
    emergency_stop: true
    max_loss_percent: 10.0
    
  # ë°±ì—…
  backup:
    schedule: "0 2 * * *"           # ë§¤ì¼ ìƒˆë²½ 2ì‹œ
    retention_days: 30
    cloud_sync: false

# ================================================================
# ğŸ›¡ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬ í†µí•© ì„¤ì •
# ================================================================
risk_management:
  # ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ ì œí•œ
  global_limits:
    max_total_risk: 20.0            # ì „ì²´ ìì‚°ì˜ 20%
    max_daily_loss: 5.0             # ì¼ì¼ ìµœëŒ€ ì†ì‹¤ 5%
    max_correlation: 0.7            # ì¢…ëª©ê°„ ìµœëŒ€ ìƒê´€ê´€ê³„
    
  # ê¸´ê¸‰ ì •ì§€ ì¡°ê±´
  circuit_breaker:
    enabled: true
    triggers:
      - { type: "portfolio_loss", threshold: -10.0 }
      - { type: "market_crash", vix_level: 40.0 }
      - { type: "api_errors", count: 5 }
      - { type: "network_issues", duration: 300 }
    
  # í¬ì§€ì…˜ ì‚¬ì´ì§•
  position_sizing:
    method: "kelly_criterion"       # kelly_criterion, equal_weight, risk_parity
    kelly_max: 0.25                # ì¼ˆë¦¬ ê³µì‹ ìµœëŒ€ 25%
    volatility_adjustment: true
    correlation_adjustment: true

# ================================================================
# ğŸ“Š ë°±í…ŒìŠ¤íŒ… ì„¤ì •
# ================================================================
backtesting:
  # ê¸°ë³¸ ì„¤ì •
  enabled: true
  start_date: "2020-01-01"
  end_date: "2024-12-31"
  initial_capital: 1_000_000
  
  # ë¹„ìš© ì„¤ì •
  costs:
    commission: 0.001               # 0.1%
    slippage: 0.0005               # 0.05%
    spread: 0.0002                 # 0.02%
    
  # ë²¤ì¹˜ë§ˆí¬
  benchmarks:
    us: "SPY"
    kr: "069500"                   # KODEX 200
    jp: "1306.T"                   # TOPIX ETF
    in: "NIFTYBEES.NS"            # Nifty ETF
    
  # ì„±ê³¼ ì§€í‘œ
  metrics:
    - "total_return"
    - "sharpe_ratio"
    - "max_drawdown"
    - "win_rate"
    - "profit_factor"
    - "calmar_ratio"

# ================================================================
# ğŸ”§ ê³ ê¸‰ ì„¤ì •
# ================================================================
advanced:
  # ì„±ëŠ¥ ìµœì í™”
  performance:
    multiprocessing: true
    max_workers: 8
    memory_limit_gb: 4
    
  # ë¡œê¹…
  logging:
    level: "INFO"
    rotation: "1 day"
    retention: "30 days"
    format: "%(asctime)s | %(name)s | %(levelname)s | %(message)s"
    
  # ê°œë°œì ì˜µì…˜
  developer:
    profiling: false
    debug_trading: false
    dry_run: false
    verbose_logs: false

# ================================================================
# ğŸ”Œ ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
# ================================================================
external_services:
  # AI ë¶„ì„
  ai_analysis:
    openai:
      enabled: false
      model: "gpt-4"
      max_tokens: 2000
    anthropic:
      enabled: false
      model: "claude-3-sonnet"
      
  # ë‰´ìŠ¤ ë¶„ì„
  news_sentiment:
    enabled: false
    sources: ["reuters", "bloomberg", "cnbc"]
    update_interval: 3600  # 1ì‹œê°„
    
  # ì†Œì…œ ë¯¸ë””ì–´
  social_sentiment:
    twitter:
      enabled: false
      keywords: ["stocks", "crypto", "market"]
    reddit:
      enabled: false
      subreddits: ["investing", "SecurityAnalysis"]

# ================================================================
# ğŸ“ ì„¤ì • ê²€ì¦ ë° ê¸°ë³¸ê°’
# ================================================================
validation:
  # í•„ìˆ˜ ì„¤ì • ê²€ì‚¬
  required_fields:
    - "system.environment"
    - "notifications.telegram.enabled"
    
  # ë²”ìœ„ ê²€ì‚¬
  range_checks:
    portfolio_allocation: [0, 100]
    confidence_threshold: [0, 1]
    max_position: [0, 50]
    
  # ì¼ê´€ì„± ê²€ì‚¬
  consistency_checks:
    - "us_stocks.split_trading.buy_stages í•©ê³„ëŠ” 100ì´ì–´ì•¼ í•¨"
    - "ì „ëµ ê°€ì¤‘ì¹˜ í•©ê³„ëŠ” 100ì´ì–´ì•¼ í•¨"

# ================================================================
# ğŸ† 4ëŒ€ ì‹œì¥ í†µí•© ì„¤ì • ì™„ë£Œ!
# ================================================================
# 
# ì´ settings.yamlë¡œ ê°€ëŠ¥í•œ ê²ƒë“¤:
# âœ… 4ê°œ ì‹œì¥ ì„¸ë¶€ ì „ëµ ì„¤ì •
# âœ… ë¦¬ìŠ¤í¬ ê´€ë¦¬ í†µí•© ì œì–´
# âœ… ìŠ¤ì¼€ì¤„ë§ ë° ìë™í™”
# âœ… ì•Œë¦¼ ì‹œìŠ¤í…œ ë§ì¶¤ ì„¤ì •
# âœ… ë°±í…ŒìŠ¤íŒ… ìƒì„¸ êµ¬ì„±
# âœ… ëŒ€ì‹œë³´ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
# âœ… ì„±ëŠ¥ ìµœì í™” ì˜µì…˜
# 
# ğŸš€ ëª¨ë“  ì„¤ì •ì„ ì½”ë“œ ìˆ˜ì • ì—†ì´ ì¡°ì • ê°€ëŠ¥!
# ================================================================
