# =====================================
# π† μµκ³ ν€ΈνΈν”„λ΅μ νΈ - ν†µν•© μ„¤μ • νμΌ (Enhanced Edition)
# =====================================
# 
# νμΌ μ„μΉ: settings.yaml
# μ—°λ™ νμΌ: .env.example, .gitignore, requirements.txt
# 
# μ΄ νμΌμ€ λ‹¤μκ³Ό μ™„λ²½ν•κ² μ—°λ™λ©λ‹λ‹¤:
# - ν™κ²½λ³€μ (.env)λ΅λ¶€ν„° λ―Όκ°ν• μ •λ³΄ λ΅λ“
# - requirements.txtμ λ¨λ“  ν¨ν‚¤μ§€ ν™μ©
# - .gitignoreλ΅ λ³΄μ• νμΌ λ³΄νΈ
#
# Author: μµκ³ ν€ΈνΈν€
# Version: 3.0.0 (ν†µν•© μ—°λ™ λ²„μ „)
# Project: μµκ³ ν€ΈνΈν”„λ΅μ νΈ
# Last Updated: 2025-07-01
# =====================================

# =====================================
# π ν”„λ΅μ νΈ κΈ°λ³Έ μ •λ³΄
# =====================================
project:
  name: "μµκ³ ν€ΈνΈν”„λ΅μ νΈ"
  version: "3.0.0"
  environment: ${ENVIRONMENT:-development}  # .envμ—μ„ λ΅λ“
  mode: ${PROJECT_MODE:-safe}               # .envμ—μ„ λ΅λ“
  
  # μ‹κ°„λ€ λ° μ§€μ—­ μ„¤μ • (.env μ—°λ™)
  timezone: ${TIMEZONE:-Asia/Seoul}
  language: ${LANGUAGE:-ko}
  base_currency: ${BASE_CURRENCY:-KRW}

# =====================================
# π“… μ¤μΌ€μ¤„λ¬ μ„¤μ • (Enhanced)
# =====================================
schedule:
  # μ”μΌλ³„ μ¤μΌ€μ¤„ (λ™μ  μ΅°μ • κ°€λ¥)
  weekly_schedule:
    monday: 
      strategies: ['COIN']
      priority: 'high'
      max_trades: ${MAX_DAILY_TRADES:-10}
    tuesday: 
      strategies: ['US', 'JP']
      priority: 'medium'
      max_trades: ${MAX_DAILY_TRADES:-10}
    wednesday: 
      strategies: []
      priority: 'low'
      maintenance_mode: true
    thursday: 
      strategies: ['US', 'JP']
      priority: 'high'
      max_trades: ${MAX_DAILY_TRADES:-10}
    friday: 
      strategies: ['COIN']
      priority: 'medium'
      max_trades: ${MAX_DAILY_TRADES:-10}
    saturday: 
      strategies: ['COIN', 'US', 'JP']  # ν…μ¤νΈμ©
      priority: 'test'
      max_trades: 50
      test_mode: true
    sunday: 
      strategies: []
      priority: 'low'
      backup_mode: true
  
  # λ™μ  μ¤μΌ€μ¤„ μ΅°μ •
  dynamic_adjustment:
    force_enabled_strategies: []    # κ°•μ  ν™μ„±ν™”
    force_disabled_strategies: []   # κ°•μ  λΉ„ν™μ„±ν™”
    market_condition_override: true # μ‹μ¥ μƒν™©μ— λ”°λ¥Έ μ΅°μ •
  
  # κΈ€λ΅λ² κ±°λ μ‹κ°„ (.env μ—°λ™)
  global_trading_hours:
    start_hour: ${TRADING_START_HOUR:-9}
    end_hour: ${TRADING_END_HOUR:-18}
    timezone: ${TIMEZONE:-Asia/Seoul}
    
    # ν”„λ¦¬λ§μΌ“/μ• ν”„ν„°μ•„μ› (.env μ—°λ™)
    premarket_enabled: ${PREMARKET_TRADING:-false}
    afterhours_enabled: ${AFTERHOURS_TRADING:-false}
  
  # μ „λµλ³„ μ‹¤ν–‰ μ ν•
  strategy_restrictions:
    US:
      allowed_hours: [9, 10, 11, 12, 13, 14, 15, 16]
      min_interval_minutes: ${SIGNAL_CHECK_INTERVAL:-300}  # .envμ—μ„ μ΄ λ‹¨μ„λ¥Ό λ¶„μΌλ΅ λ³€ν™
      max_positions: ${MAX_OPEN_POSITIONS:-5}
      confidence_threshold: ${US_CONFIDENCE_THRESHOLD:-0.75}
    JP:
      allowed_hours: [9, 10, 11, 12, 13, 14, 15]
      min_interval_minutes: ${SIGNAL_CHECK_INTERVAL:-300}
      max_positions: ${MAX_OPEN_POSITIONS:-5}
      confidence_threshold: ${JP_CONFIDENCE_THRESHOLD:-0.60}
    COIN:
      allowed_hours: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]
      min_interval_minutes: ${PRICE_UPDATE_INTERVAL:-30}   # μ•”νΈν™”νλ” λ” μμ£Ό
      max_positions: ${MAX_OPEN_POSITIONS:-5}
      confidence_threshold: ${COIN_CONFIDENCE_THRESHOLD:-0.65}
  
  # μ‹¤ν–‰ μ‹κ°„ μ¤μΌ€μ¤„
  execution_schedule:
    market_analysis: ${MARKET_ANALYSIS_TIME:-"08:30"}
    trading_execution: ${TRADING_EXECUTION_TIME:-"09:00"}
    daily_report: ${DAILY_REPORT_TIME:-"18:00"}
    weekly_report: ${WEEKLY_REPORT_DAY:-"sunday"}
    monthly_report: ${MONTHLY_REPORT_DAY:-1}
    system_health_check: "06:00"
    backup_time: "02:00"
  
  # ν…μ¤νΈ λ¨λ“ μ„¤μ • (.env μ—°λ™)
  test_mode:
    enabled: ${TEST_MODE:-false}
    ignore_market_hours: false
    override_weekday_limits: false
    force_all_strategies: false
    mock_data_enabled: ${TEST_DATA_ENABLED:-false}

# =====================================
# π‡Ίπ‡Έ λ―Έκµ­ μ£Όμ‹ μ „λµ (.env μ—°λ™)
# =====================================
us_strategy:
  enabled: ${US_STRATEGY_ENABLED:-true}
  confidence_threshold: ${US_CONFIDENCE_THRESHOLD:-0.75}
  allocation: ${US_ALLOCATION:-0.60}  # ν¬νΈν΄λ¦¬μ¤ 60%
  
  # μ›λ  λ²„ν• κ°€μΉν¬μ μ§€ν‘
  buffett_strategy:
    enabled: true
    pbr_max: 2.0
    roe_min: ${ROE_MIN:-15.0}
    debt_ratio_max: 0.4
    dividend_yield_min: 2.0
    pe_ratio_max: 20.0
  
  # ν”Όν„° λ¦°μΉ μ„±μ¥ν¬μ μ§€ν‘
  lynch_strategy:
    enabled: true
    peg_ratio_max: 1.0
    growth_rate_min: 10.0
    earnings_consistency: true
    sector_diversification: true
  
  # κΈ°μ μ  λ¶„μ„ (.env μ—°λ™)
  technical_analysis:
    sma_short: ${SMA_SHORT_PERIOD:-20}
    sma_long: ${SMA_LONG_PERIOD:-50}
    rsi_period: ${RSI_PERIOD:-14}
    rsi_oversold: ${RSI_OVERSOLD:-30}
    rsi_overbought: ${RSI_OVERBOUGHT:-70}
    macd_fast: ${MACD_FAST_PERIOD:-12}
    macd_slow: ${MACD_SLOW_PERIOD:-26}
    macd_signal: ${MACD_SIGNAL_PERIOD:-9}
    bollinger_period: ${BB_PERIOD:-20}
    bollinger_std: ${BB_STD_DEV:-2.0}
  
  # μ¶”μ  μΆ…λ© (μ„Ήν„°λ³„ λ‹¤μ–‘ν™”)
  symbols:
    TECH: ['AAPL', 'MSFT', 'GOOGL', 'NVDA', 'META', 'AMZN', 'TSLA', 'CRM', 'ORCL', 'ADBE']
    FINANCE: ['JPM', 'BAC', 'WFC', 'GS', 'MS', 'C', 'AXP', 'BRK.B']
    HEALTHCARE: ['JNJ', 'PFE', 'UNH', 'ABBV', 'MRK', 'LLY', 'TMO', 'DHR']
    CONSUMER: ['HD', 'MCD', 'WMT', 'PG', 'KO', 'PEP', 'COST', 'NKE']
    ENERGY: ['XOM', 'CVX', 'COP', 'EOG', 'SLB']
    INDUSTRIAL: ['BA', 'CAT', 'GE', 'LMT', 'UPS', 'FDX']
  
  # λ¦¬μ¤ν¬ κ΄€λ¦¬
  risk_management:
    max_position_size: ${MAX_POSITION_SIZE:-0.05}
    stop_loss: ${DEFAULT_STOP_LOSS:-0.03}
    take_profit: ${DEFAULT_TAKE_PROFIT:-0.06}
    trailing_stop: ${TRAILING_STOP_ENABLED:-true}
    max_correlation: 0.7

# =====================================
# π‡―π‡µ μΌλ³Έ μ£Όμ‹ μ „λµ (.env μ—°λ™)
# =====================================
jp_strategy:
  enabled: ${JP_STRATEGY_ENABLED:-true}
  confidence_threshold: ${JP_CONFIDENCE_THRESHOLD:-0.60}
  allocation: ${JP_ALLOCATION:-0.20}  # ν¬νΈν΄λ¦¬μ¤ 20%
  
  # μΌλ©κ· ν•ν‘ μ„¤μ • (.env μ—°λ™)
  ichimoku:
    enabled: true
    tenkan_period: ${ICHIMOKU_TENKAN:-9}
    kijun_period: ${ICHIMOKU_KIJUN:-26}
    senkou_b_period: ${ICHIMOKU_SENKOU_B:-52}
    chikou_span: true
    kumo_analysis: true
  
  # λ¨λ©ν…€ λν μ „λµ
  momentum_strategy:
    enabled: true
    breakout_period: 15
    volume_threshold: 1.2
    rsi_period: ${RSI_PERIOD:-14}
    momentum_threshold: 0.05
  
  # μΌλ³Έ νΉν™” λ¶„μ„
  japan_specific:
    dividend_focus: true
    dividend_threshold: 4.0
    dividend_bonus_score: 0.1
    zaibatsu_analysis: true  # μ¬λ² κΈ°μ—… λ¶„μ„
    topix_correlation: true  # TOPIX μƒκ΄€κ΄€κ³„
  
  # μ¶”μ  μΆ…λ© (μΌλ³Έ μ£Όμ” κΈ°μ—…)
  symbols:
    TECH: ['7203.T', '6758.T', '9984.T', '6861.T', '4689.T', '8035.T']  # ν† μ”νƒ€, μ†λ‹, μ†ν”„νΈλ±…ν¬
    FINANCE: ['8306.T', '8316.T', '8411.T', '8355.T', '8766.T']         # λ―ΈμΈ λΉ„μ‹UFJ, μ¤λ―Έν† λ¨
    CONSUMER: ['9983.T', '2914.T', '4568.T', '7974.T', '9843.T']        # ν¨μ¤νΈλ¦¬ν…μΌλ§, JT
    INDUSTRIAL: ['6954.T', '6902.T', '7733.T', '6098.T', '7011.T']      # ν™”λ‚™, λ΄μ†, μ¬λ¦Όν‘Έμ¤
    TRADING: ['8058.T', '2768.T', '8001.T']                             # λ―ΈμΈ λΉ„μ‹μƒμ‚¬, μƒμ‚¬
  
  # μΌλ³Έ μ‹μ¥ νΉν™” λ¦¬μ¤ν¬
  risk_management:
    max_position_size: ${MAX_POSITION_SIZE:-0.05}
    stop_loss: ${DEFAULT_STOP_LOSS:-0.03}
    take_profit: ${DEFAULT_TAKE_PROFIT:-0.06}
    currency_hedge: true  # ν™μ¨ ν—¤μ§€
    nikkei_correlation_limit: 0.8

# =====================================
# π™ μ•”νΈν™”ν μ „λµ (.env μ—°λ™)
# =====================================
coin_strategy:
  enabled: ${COIN_STRATEGY_ENABLED:-true}
  confidence_threshold: ${COIN_CONFIDENCE_THRESHOLD:-0.65}
  allocation: ${COIN_ALLOCATION:-0.20}  # ν¬νΈν΄λ¦¬μ¤ 20%
  
  # κ±°λλ‰ λ¶„μ„
  volume_analysis:
    spike_threshold: 2.0
    analysis_period: 24
    volume_ma_period: 20
    whale_detection: true
  
  # κ°€κ²© μ›€μ§μ„ λ¶„μ„
  price_analysis:
    volatility_window: ${FEATURE_LOOKBACK_DAYS:-30}
    price_change_threshold: 0.05
    support_resistance: true
    fibonacci_retracement: true
  
  # μ•”νΈν™”ν νΉν™” μ§€ν‘
  crypto_indicators:
    fear_greed_index: true
    social_sentiment: false  # λ‰΄μ¤ λ¶„μ„ μ κ±°
    on_chain_metrics: false  # μ¨μ²΄μΈ λ¶„μ„ (κ³ κΈ‰)
    defi_yields: true
    staking_rewards: true
  
  # μ¶”μ  μΆ…λ© (μΉ΄ν…κ³ λ¦¬λ³„)
  symbols:
    MAJOR: 
      - 'KRW-BTC'   # λΉ„νΈμ½”μΈ
      - 'KRW-ETH'   # μ΄λ”λ¦¬μ›€
      - 'KRW-XRP'   # λ¦¬ν”
      - 'KRW-ADA'   # μΉ΄λ¥΄λ‹¤λ…Έ
      - 'KRW-SOL'   # μ†”λΌλ‚
    DEFI: 
      - 'KRW-UNI'   # μ λ‹μ¤μ™‘
      - 'KRW-LINK'  # μ²΄μΈλ§ν¬
      - 'KRW-AAVE'  # μ•„λ² 
      - 'KRW-CRV'   # μ»¤λΈ
      - 'KRW-COMP'  # μ»΄νμ΄λ“
    LAYER1: 
      - 'KRW-DOT'   # ν΄μΉ΄λ‹·
      - 'KRW-AVAX'  # μ•„λ°λ€μ²΄
      - 'KRW-ATOM'  # μ½”μ¤λ¨μ¤
      - 'KRW-NEAR'  # λ‹μ–΄
      - 'KRW-MATIC' # ν΄λ¦¬κ³¤
    ALTCOIN: 
      - 'KRW-DOGE'  # λ„μ§€μ½”μΈ
      - 'KRW-SHIB'  # μ‹λ°”μ΄λ„
      - 'KRW-LTC'   # λΌμ΄νΈμ½”μΈ
      - 'KRW-BCH'   # λΉ„νΈμ½”μΈμΊμ‹
  
  # μ•”νΈν™”ν λ¦¬μ¤ν¬ κ΄€λ¦¬
  risk_management:
    max_position_size: ${MAX_POSITION_SIZE:-0.05}
    stop_loss: ${DEFAULT_STOP_LOSS:-0.03}
    take_profit: ${DEFAULT_TAKE_PROFIT:-0.06}
    trailing_stop: true
    volatility_adjustment: true
    correlation_limit: 0.6  # μ•”νΈν™”ν κ°„ μƒκ΄€κ΄€κ³„

# =====================================
# π¤– AI/ML μ „λµ μ„¤μ • (requirements.txt μ—°λ™)
# =====================================
ml_strategy:
  enabled: ${ML_ENABLED:-false}
  
  # μ‚¬μ©ν•  λ¨λΈ (requirements.txtμ— ν¬ν•¨λ¨)
  models:
    ensemble_voting: ${ML_ENSEMBLE_VOTING:-soft}
    active_models: ${ML_MODELS:-["random_forest", "xgboost", "lstm"]}
  
  # λ¨λΈ μ„¤μ •
  model_config:
    random_forest:
      n_estimators: 100
      max_depth: 10
      min_samples_split: 5
    
    xgboost:
      n_estimators: 100
      learning_rate: 0.1
      max_depth: 6
    
    lstm:
      sequence_length: 60
      hidden_units: 50
      dropout: 0.2
      epochs: 100
  
  # νΉμ„± μ—”μ§€λ‹μ–΄λ§ (.env μ—°λ™)
  feature_engineering:
    lookback_days: ${FEATURE_LOOKBACK_DAYS:-30}
    correlation_threshold: ${FEATURE_CORRELATION_THRESHOLD:-0.95}
    technical_indicators: true
    market_regime: true
    volatility_features: true
  
  # λ¨λΈ κ΄€λ¦¬
  model_management:
    retrain_interval: ${ML_RETRAIN_INTERVAL_DAYS:-7}
    validation_split: ${ML_VALIDATION_SPLIT:-0.2}
    min_accuracy: ${ML_MIN_MODEL_ACCURACY:-0.65}
    model_path: ${ML_MODEL_PATH:-"models/"}
    auto_deployment: true

# =====================================
# π’° κ±°λ μ‹¤ν–‰ μ„¤μ • (.env μ—°λ™)
# =====================================
trading:
  # κ±°λ λ¨λ“ (.envμ—μ„ μ μ–΄)
  paper_trading: ${PAPER_TRADING:-true}
  auto_execution: ${AUTO_EXECUTION:-true}
  
  # μ£Όλ¬Έ μ„¤μ •
  order_type: 'limit'  # market, limit, stop_loss, take_profit
  order_timeout: 300
  retry_attempts: 3
  slippage_tolerance: 0.001
  
  # ν¬μ§€μ… μ‚¬μ΄μ§• (.env μ—°λ™)
  position_sizing:
    method: 'fixed_percent'  # fixed_percent, kelly, volatility, ml_based
    default_size: ${DEFAULT_POSITION_SIZE:-0.05}
    max_size: ${MAX_POSITION_SIZE:-0.05}
    min_amount_usd: ${MIN_TRADE_AMOUNT_USD:-100}
    max_amount_usd: ${MAX_TRADE_AMOUNT_USD:-10000}
  
  # κ±°λ μ ν• (.env μ—°λ™)
  limits:
    max_daily_trades: ${MAX_DAILY_TRADES:-20}
    max_open_positions: ${MAX_OPEN_POSITIONS:-5}
    max_daily_loss: ${MAX_DAILY_LOSS:-0.01}
    max_drawdown: ${MAX_DRAWDOWN:-0.1}
  
  # μ‹¤ν–‰ μ°μ„ μμ„
  execution_priority:
    - 'stop_loss'      # μ†μ λ§¤ μµμ°μ„ 
    - 'take_profit'    # μµμ λ§¤
    - 'new_signals'    # μƒλ΅μ΄ μ‹ νΈ
    - 'rebalancing'    # λ¦¬λ°Έλ°μ‹±

# =====================================
# π― ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ (.env μ—°λ™)
# =====================================
portfolio:
  # μμ‚° λ°°λ¶„ (.env μ—°λ™)
  allocation:
    us_ratio: ${US_ALLOCATION:-0.60}
    jp_ratio: ${JP_ALLOCATION:-0.20}
    coin_ratio: ${COIN_ALLOCATION:-0.20}
    cash_ratio: ${CASH_ALLOCATION:-0.10}
  
  # λ¦¬λ°Έλ°μ‹± (.env μ—°λ™)
  rebalancing:
    frequency: ${REBALANCE_FREQUENCY:-weekly}
    threshold: ${REBALANCE_THRESHOLD:-0.05}
    method: 'threshold'  # threshold, calendar, volatility
    
    # λ¦¬λ°Έλ°μ‹± μ μ•½
    min_trade_size: ${MIN_TRADE_AMOUNT_USD:-100}
    transaction_cost: 0.001
    tax_optimization: true
  
  # λ‹¤μ–‘ν™” μ μ•½
  diversification:
    max_sector_weight: ${MAX_SECTOR_EXPOSURE:-0.25}
    max_single_stock: ${MAX_POSITION_SIZE:-0.05}
    min_positions: 10
    correlation_limit: 0.7

# =====================================
# π“ λ¦¬μ¤ν¬ κ΄€λ¦¬ (.env μ—°λ™)
# =====================================
risk_management:
  # ν¬μ§€μ… λ¦¬μ¤ν¬ (.env μ—°λ™)
  position_risk:
    max_position_size: ${MAX_POSITION_SIZE:-0.05}
    max_total_exposure: 0.95
    stop_loss: ${DEFAULT_STOP_LOSS:-0.03}
    take_profit: ${DEFAULT_TAKE_PROFIT:-0.06}
    trailing_stop_distance: ${TRAILING_STOP_DISTANCE:-0.02}
  
  # ν¬νΈν΄λ¦¬μ¤ λ¦¬μ¤ν¬ (.env μ—°λ™)
  portfolio_risk:
    max_portfolio_risk: ${MAX_PORTFOLIO_RISK:-0.02}
    max_daily_loss: ${MAX_DAILY_LOSS:-0.01}
    max_drawdown: ${MAX_DRAWDOWN:-0.1}
    var_confidence: 0.95
    var_horizon: 1  # 1μΌ
  
  # μ‹μ¥ λ¦¬μ¤ν¬
  market_risk:
    volatility_limit: 0.25
    correlation_limit: 0.7
    beta_limit: 1.5
    market_regime_detection: true
  
  # λ¦¬μ¤ν¬ λ¨λ‹ν„°λ§
  monitoring:
    real_time_alerts: true
    risk_metrics_interval: ${METRICS_INTERVAL:-300}
    stress_testing: true
    scenario_analysis: true

# =====================================
# π λΈλ΅μ»¤ API μ„¤μ • (.env μ—°λ™)
# =====================================
api:
  # μ—…λΉ„νΈ (μ•”νΈν™”ν) - .envμ—μ„ λ΅λ“
  upbit:
    enabled: ${UPBIT_ENABLED:-true}
    paper_trading: ${UPBIT_PAPER_TRADING:-true}
    server_url: "https://api.upbit.com"
    
    # API μ ν• (.env μ—°λ™)
    rate_limits:
      requests_per_second: ${UPBIT_REQUESTS_PER_SECOND:-8}
      requests_per_minute: ${UPBIT_REQUESTS_PER_MINUTE:-100}
      order_requests_per_second: ${UPBIT_ORDER_REQUESTS_PER_SECOND:-1}
    
    # κ±°λ μ„¤μ •
    order_type: ${UPBIT_ORDER_TYPE:-limit}
    supported_pairs: ${UPBIT_TRADING_PAIRS:-["KRW-BTC", "KRW-ETH"]}
    excluded_pairs: ${UPBIT_EXCLUDED_PAIRS:-["KRW-BTT"]}
    
    # μμλ£ (.env μ—°λ™)
    fees:
      maker: ${UPBIT_MAKER_FEE:-0.0005}
      taker: ${UPBIT_TAKER_FEE:-0.0005}
  
  # Interactive Brokers (μ£Όμ‹) - .envμ—μ„ λ΅λ“
  ibkr:
    enabled: ${IBKR_ENABLED:-true}
    paper_trading: ${IBKR_PAPER_TRADING:-true}
    
    # μ—°κ²° μ„¤μ • (.env μ—°λ™)
    connection:
      host: ${IBKR_TWS_HOST:-"127.0.0.1"}
      port: ${IBKR_TWS_PORT:-7497}
      client_id: ${IBKR_CLIENT_ID:-1}
      timeout: ${IBKR_CONNECT_TIMEOUT:-30}
      heartbeat: ${IBKR_HEARTBEAT_INTERVAL:-60}
    
    # κ³„μΆ μ„¤μ •
    account:
      account_id: ""  # .envμ—μ„ λ΅λ“
      currency: "USD"
      
    # μ§€μ› μ‹μ¥ (.env μ—°λ™)
    markets: ${IBKR_MARKETS:-["SMART", "NYSE", "NASDAQ"]}
    currencies: ${IBKR_CURRENCIES:-["USD", "JPY"]}
    
    # μ£Όλ¬Έ μ„¤μ •
    order_type: ${IBKR_ORDER_TYPE:-"LMT"}
    request_timeout: ${IBKR_REQUEST_TIMEOUT:-10}
  
  # μ™Έλ¶€ λ°μ΄ν„° μ†μ¤ (.env μ—°λ™)
  data_sources:
    # μ•Όν›„ νμ΄λ‚Έμ¤
    yahoo_finance:
      enabled: ${YAHOO_FINANCE_ENABLED:-true}
      request_delay: ${YAHOO_REQUEST_DELAY:-1}
      
    # μ•νλ²¤ν‹°μ§€ (μ„ νƒμ‚¬ν•­)
    alpha_vantage:
      enabled: ${ALPHA_VANTAGE_ENABLED:-false}
      # API ν‚¤λ” .envμ—μ„ λ΅λ“
      
    # κ²½μ  λ°μ΄ν„°
    fred:
      enabled: ${FRED_ENABLED:-false}
      # API ν‚¤λ” .envμ—μ„ λ΅λ“

# =====================================
# π”” μ•λ¦Ό μ‹μ¤ν… (.env μ—°λ™)
# =====================================
notifications:
  # ν…”λ κ·Έλ¨ (.envμ—μ„ λ΅λ“)
  telegram:
    enabled: ${TELEGRAM_ENABLED:-true}
    # ν† ν°κ³Ό μ±„ν…IDλ” .envμ—μ„ λ΅λ“
    message_format: ${TELEGRAM_MESSAGE_FORMAT:-detailed}
    rate_limit: ${TELEGRAM_RATE_LIMIT:-10}
    
    # μ•λ¦Ό λ λ²¨ (.env μ—°λ™)
    notifications:
      trades: ${TELEGRAM_NOTIFY_TRADES:-true}
      errors: ${TELEGRAM_NOTIFY_ERRORS:-true}
      daily_summary: ${TELEGRAM_NOTIFY_DAILY_SUMMARY:-true}
      critical_only: ${TELEGRAM_NOTIFY_CRITICAL_ONLY:-false}
  
  # μ΄λ©”μΌ (μ„ νƒμ‚¬ν•­) - .envμ—μ„ λ΅λ“
  email:
    enabled: ${EMAIL_ENABLED:-false}
    # SMTP μ„¤μ •μ€ .envμ—μ„ λ΅λ“
    
  # μ¬λ™ (μ„ νƒμ‚¬ν•­) - .envμ—μ„ λ΅λ“
  slack:
    enabled: ${SLACK_ENABLED:-false}
    # μ›Ήν›… URLμ€ .envμ—μ„ λ΅λ“
    
  # λ””μ¤μ½”λ“ (μ„ νƒμ‚¬ν•­) - .envμ—μ„ λ΅λ“
  discord:
    enabled: ${DISCORD_ENABLED:-false}
    # μ›Ήν›… URLμ€ .envμ—μ„ λ΅λ“
  
  # μ•λ¦Ό μ¤μΌ€μ¤„ (.env μ—°λ™)
  schedule:
    daily_report: ${DAILY_REPORT_TIME:-"18:00"}
    weekly_report: ${WEEKLY_REPORT_DAY:-"sunday"}
    monthly_report: ${MONTHLY_REPORT_DAY:-1}
    error_immediate: true
    trade_immediate: true

# =====================================
# π“ λ°±ν…μ¤νΈ μ„¤μ • (.env μ—°λ™)
# =====================================
backtest:
  enabled: ${BACKTEST_ENABLED:-true}
  
  # λ°±ν…μ¤νΈ κΈ°κ°„ (.env μ—°λ™)
  period:
    start_date: ${BACKTEST_START_DATE:-"2022-01-01"}
    end_date: ${BACKTEST_END_DATE:-"2024-12-31"}
    initial_capital: ${BACKTEST_INITIAL_CAPITAL:-100000}
    
  # λ²¤μΉλ§ν¬ (.env μ—°λ™)
  benchmark:
    symbol: ${BACKTEST_BENCHMARK:-"SPY"}
    risk_free_rate: ${BACKTEST_RISK_FREE_RATE:-0.02}
  
  # κ±°λ λΉ„μ© (.env μ—°λ™)
  costs:
    commission: ${BACKTEST_COMMISSION:-0.001}
    slippage: ${BACKTEST_SLIPPAGE:-0.0005}
    
  # μ›ν¬ν¬μ›λ“ λ¶„μ„ (.env μ—°λ™)
  walkforward:
    enabled: ${WALKFORWARD_ENABLED:-true}
    window_months: ${WALKFORWARD_WINDOW_MONTHS:-6}
    step_months: ${WALKFORWARD_STEP_MONTHS:-1}
  
  # μ„±κ³Ό μ§€ν‘
  metrics:
    - 'total_return'
    - 'annualized_return'
    - 'sharpe_ratio'
    - 'calmar_ratio'
    - 'max_drawdown'
    - 'win_rate'
    - 'profit_factor'
    - 'sortino_ratio'
    - 'information_ratio'

# =====================================
# π’Ύ λ°μ΄ν„° κ΄€λ¦¬ (.env μ—°λ™)
# =====================================
data_management:
  # λ°μ΄ν„° λ””λ ‰ν† λ¦¬ (.env μ—°λ™)
  directories:
    data_dir: ${DATA_DIR:-"data"}
    price_data: ${PRICE_DATA_DIR:-"data/prices"}
    trade_data: ${TRADE_DATA_DIR:-"data/trades"}
    model_data: ${MODEL_DATA_DIR:-"data/models"}
    reports: ${REPORT_DIR:-"reports"}
    logs: ${LOGS_DIR:-"data/logs"}
    backups: ${BACKUP_DIR:-"backups"}
  
  # λ°μ΄ν„° λ³΄κ΄€ (.env μ—°λ™)
  retention:
    price_data_days: ${PRICE_DATA_RETENTION_DAYS:-1095}  # 3λ…„
    trade_data_days: ${TRADE_DATA_RETENTION_DAYS:-2555}  # 7λ…„
    log_data_days: ${LOG_DATA_RETENTION_DAYS:-365}       # 1λ…„
  
  # μλ™ λ°±μ—… (.env μ—°λ™)
  backup:
    enabled: ${AUTO_BACKUP_ENABLED:-true}
    interval_hours: ${BACKUP_INTERVAL_HOURS:-24}
    retention_days: ${BACKUP_RETENTION_DAYS:-30}
    compression: ${BACKUP_COMPRESSION:-true}
    
    # ν΄λΌμ°λ“ λ°±μ—… (μ„ νƒμ‚¬ν•­)
    cloud_backup:
      enabled: ${CLOUD_BACKUP_ENABLED:-false}
      # AWS/GCP μ„¤μ •μ€ .envμ—μ„ λ΅λ“
  
  # λ°μ΄ν„°λ² μ΄μ¤ (.env μ—°λ™)
  database:
    enabled: true
    url: ${DATABASE_URL:-"sqlite:///data/trading.db"}
    pool_size: ${DB_POOL_SIZE:-20}
    max_overflow: ${DB_MAX_OVERFLOW:-30}
    pool_timeout: ${DB_POOL_TIMEOUT:-30}
    
    # λ°±μ—… DB
    backup_url: ${BACKUP_DATABASE_URL:-"sqlite:///backups/trading_backup.db"}

# =====================================
# π€ μ„±λ¥ μµμ ν™” (.env μ—°λ™)
# =====================================
performance:
  # λ©€ν‹°ν”„λ΅μ„Έμ‹± (.env μ—°λ™)
  multiprocessing:
    enabled: ${MULTIPROCESSING_ENABLED:-true}
    max_workers: ${MAX_WORKERS:-4}
    
  # λΉ„λ™κΈ° μ²λ¦¬ (.env μ—°λ™)
  async_processing:
    enabled: ${ASYNC_ENABLED:-true}
    batch_size: ${ASYNC_BATCH_SIZE:-100}
    
  # μΊμ‹± (.env μ—°λ™)
  caching:
    enabled: ${CACHE_ENABLED:-true}
    ttl_seconds: ${CACHE_TTL_SECONDS:-300}
    max_size: ${CACHE_MAX_SIZE:-1000}
    
    # Redis μΊμ‹ (.env μ—°λ™)
    redis:
      enabled: ${REDIS_ENABLED:-false}
      url: ${REDIS_URL:-"redis://localhost:6379/0"}
      max_connections: ${REDIS_MAX_CONNECTIONS:-20}
  
  # ν μ‹μ¤ν… (.env μ—°λ™)
  queue:
    enabled: ${QUEUE_ENABLED:-false}
    broker_url: ${CELERY_BROKER_URL:-"redis://localhost:6379/1"}
    result_backend: ${CELERY_RESULT_BACKEND:-"redis://localhost:6379/2"}
    
  # μ¤λ λ“ ν’€
  thread_pool:
    size: ${THREAD_POOL_SIZE:-10}
    
  # λ©”λ¨λ¦¬ κ΄€λ¦¬
  memory:
    warning_threshold_mb: ${MEMORY_WARNING_THRESHOLD:-1000}
    gc_threshold: 0.8

# =====================================
# π“ λ¨λ‹ν„°λ§ & κ΄€μ°°μ„± (.env μ—°λ™)
# =====================================
monitoring:
  enabled: ${MONITORING_ENABLED:-true}
  
  # λ©”νΈλ¦­ μμ§‘ (.env μ—°λ™)
  metrics:
    collection_interval: ${METRICS_INTERVAL:-300}
    retention_days: 30
    
    # μ‹μ¤ν… λ©”νΈλ¦­
    system_metrics:
      cpu_threshold: ${CPU_WARNING_THRESHOLD:-80}
      memory_threshold: ${MEMORY_WARNING_THRESHOLD:-85}
      disk_threshold: ${DISK_ALERT_THRESHOLD:-90}
  
  # ν—¬μ¤μ²΄ν¬
  health_check:
    enabled: true
    interval: ${HEALTH_CHECK_INTERVAL:-300}
    timeout: 30
    
    # μ²΄ν¬ ν•­λ©
    checks:
      - 'database_connection'
      - 'broker_connection'
      - 'memory_usage'
      - 'disk_space'
      - 'api_connectivity'
  
  # λ΅κΉ… (.env μ—°λ™)
  logging:
    level: ${LOG_LEVEL:-INFO}
    format: ${LOG_FORMAT:-detailed}
    
    # λ΅κ·Έ νμΌ μ„¤μ •
    files:
      main_log: ${LOG_FILE:-"trading.log"}
      error_log: ${ERROR_LOG_FILE:-"errors.log"}
      trade_log: ${TRADE_LOG_FILE:-"trades.log"}
      
    # λ΅κ·Έ λ΅ν…μ΄μ…
    rotation:
      max_size_mb: ${LOG_FILE_SIZE_MB:-100}
      backup_count: ${LOG_BACKUP_COUNT:-10}
      rotation_type: ${LOG_ROTATION:-daily}

# =====================================
# π”’ λ³΄μ• μ„¤μ • (.env μ—°λ™)
# =====================================
security:
  # μ•”νΈν™” (.env μ—°λ™)
  encryption:
    master_key: ""  # .envμ—μ„ λ΅λ“ (MASTER_ENCRYPTION_KEY)
    api_key_encryption: ${API_KEY_ENCRYPTION:-true}
    rotation_days: ${API_KEY_ROTATION_DAYS:-30}
    
  # μΈμ¦ (.env μ—°λ™)
  authentication:
    jwt_secret: ""  # .envμ—μ„ λ΅λ“ (JWT_SECRET)
    jwt_expiration: ${JWT_EXPIRATION_HOURS:-24}
    session_timeout: ${SESSION_TIMEOUT:-3600}
    
  # API λ³΄μ•
  api_security:
    rate_limiting:
      enabled: true
      requests_per_minute: ${RATE_LIMIT_PER_MINUTE:-100}
      
    # IP ν™”μ΄νΈλ¦¬μ¤νΈ (μ„ νƒμ‚¬ν•­)
    ip_whitelist: []
    
    # μ”μ²­ κ²€μ¦
    request_validation: true
    response_sanitization: true

# =====================================
# π μ›Ή μΈν„°νμ΄μ¤ (.env μ—°λ™)
# =====================================
web:
  enabled: ${WEB_ENABLED:-false}
  
  # μ„λ²„ μ„¤μ • (.env μ—°λ™)
  server:
    host: ${WEB_HOST:-"127.0.0.1"}
    port: ${WEB_PORT:-8000}
    debug: ${WEB_DEBUG:-false}
    
  # μΈμ¦ (.env μ—°λ™)
  auth:
    required: ${WEB_AUTH_REQUIRED:-true}
    # μ‚¬μ©μλ…/λΉ„λ°€λ²νΈλ” .envμ—μ„ λ΅λ“
    session_timeout: ${WEB_SESSION_TIMEOUT:-3600}
    concurrent_sessions: ${WEB_CONCURRENT_SESSIONS:-1}
  
  # API μ—”λ“ν¬μΈνΈ (.env μ—°λ™)
  api:
    enabled: ${API_ENABLED:-false}
    rate_limit: ${API_RATE_LIMIT:-100}
    
    # μ κ³µ μ—”λ“ν¬μΈνΈ
    endpoints:
      - '/api/portfolio'
      - '/api/trades'
      - '/api/performance'
      - '/api/signals'
      - '/api/health'

# =====================================
# π§ ν…μ¤νΈ & κ°λ° (.env μ—°λ™)
# =====================================
development:
  # κ°λ° λ¨λ“ (.env μ—°λ™)
  debug_mode: ${DEBUG_MODE:-false}
  verbose_logging: ${VERBOSE_LOGGING:-false}
  
  # ν…μ¤νΈ μ„¤μ • (.env μ—°λ™)
  testing:
    test_mode: ${TEST_MODE:-false}
    mock_trading: ${MOCK_TRADING_ENABLED:-true}
    test_data: ${TEST_DATA_ENABLED:-false}
    
    # μ‹λ®¬λ μ΄μ…
    simulation:
      speed: ${SIMULATION_SPEED:-1.0}
      deterministic: false
  
  # ν”„λ΅νμΌλ§ (.env μ—°λ™)
  profiling:
    enabled: ${PROFILING_ENABLED:-false}
    memory_profiling: ${MEMORY_PROFILING:-false}
    
    # λ””λ²„κ·Έ μ¶λ ¥
    debug_output:
      print_signals: false
      print_trades: false
      print_errors: true
      save_debug_data: false

# =====================================
# π”§ κ³ κΈ‰ μ „λµ μ„¤μ •
# =====================================
advanced_strategies:
  # λ©€ν‹° μ „λµ μ•™μƒλΈ”
  ensemble:
    enabled: ${STRATEGY_ENSEMBLE:-true}
    voting_method: ${STRATEGY_WEIGHTS:-equal}  # equal, performance, risk_adjusted
    
    # μ „λµ κ°€μ¤‘μΉ (λ™μ  μ΅°μ •)
    weights:
      us_strategy: 0.4
      jp_strategy: 0.3
      coin_strategy: 0.3
  
  # μ μ‘μ  νλΌλ―Έν„° (.env μ—°λ™)
  adaptive_parameters:
    enabled: ${ADAPTIVE_PARAMETERS:-true}
    optimization_interval: ${PARAMETER_OPTIMIZATION_INTERVAL:-30}
    
    # μµμ ν™” λ°©λ²•
    optimization_method: 'bayesian'  # grid, random, bayesian
    objective: 'sharpe_ratio'
  
  # μ‹ νΈ ν•„ν„°λ§ (.env μ—°λ™)
  signal_filtering:
    enabled: ${SIGNAL_FILTERING_ENABLED:-true}
    min_strength: ${MIN_SIGNAL_STRENGTH:-0.6}
    confirmation_required: ${SIGNAL_CONFIRMATION_REQUIRED:-true}
    
    # ν•„ν„° μ΅°κ±΄
    filters:
      - 'confidence_threshold'
      - 'market_regime'
      - 'volatility_filter'
      - 'correlation_filter'

# =====================================
# π λ‹¤κµ­κ°€ μ„¤μ • (.env μ—°λ™)
# =====================================
localization:
  # μ–Έμ–΄ μ„¤μ • (.env μ—°λ™)
  language: ${LANGUAGE:-ko}
  
  # ν†µν™” μ„¤μ • (.env μ—°λ™)
  currency:
    base: ${BASE_CURRENCY:-KRW}
    quote: ${QUOTE_CURRENCY:-USD}
    
  # μ‹κ°„λ€ μ„¤μ • (.env μ—°λ™)
  timezone: ${TIMEZONE:-Asia/Seoul}
  
  # μ§€μ—­λ³„ μ„¤μ •
  regions:
    korea:
      trading_calendar: 'KRX'
      holidays: 'korea'
      tax_rate: 0.0
      
    usa:
      trading_calendar: 'NYSE'
      holidays: 'usa'
      tax_rate: 0.0  # μ„ΈκΈμ€ λ³„λ„ κ³„μ‚°
      
    japan:
      trading_calendar: 'TSE'
      holidays: 'japan'
      tax_rate: 0.0

# =====================================
# π“ κ·μ • μ¤€μ (.env μ—°λ™)
# =====================================
compliance:
  enabled: ${COMPLIANCE_ENABLED:-true}
  
  # κ±°λ κ°μ‹
  surveillance:
    position_reporting: ${POSITION_REPORTING:-true}
    trade_surveillance: ${TRADE_SURVEILLANCE:-true}
    
  # μ„Έλ¬΄ λ³΄κ³  (.env μ—°λ™)
  tax_reporting:
    enabled: ${TAX_REPORTING_ENABLED:-true}
    year_end: ${TAX_YEAR_END:-"12-31"}
    jurisdiction: ${TAX_JURISDICTION:-"KR"}
    
  # κ°μ‚¬ λ΅κ·Έ (.env μ—°λ™)
  audit:
    logging: ${AUDIT_LOGGING:-true}
    encryption: ${AUDIT_LOG_ENCRYPTION:-true}
    retention_years: 7

# =====================================
# π’΅ μ‹¤ν—μ  κΈ°λ¥ (.env μ—°λ™)
# =====================================
experimental:
  # μ„Όν‹°λ©νΈ λ¶„μ„ (.env μ—°λ™)
  sentiment_analysis:
    enabled: ${SENTIMENT_ANALYSIS_ENABLED:-false}
    weight: ${NEWS_SENTIMENT_WEIGHT:-0.1}
    
  # κ³ μ£Όν κ±°λ (.env μ—°λ™)
  hft:
    enabled: ${HFT_ENABLED:-false}
    latency_target_ms: ${HFT_LATENCY_TARGET_MS:-10}
    
  # DeFi ν†µν•© (.env μ—°λ™)
  defi:
    enabled: ${DEFI_ENABLED:-false}
    yield_farming: ${DEFI_YIELD_FARMING:-false}
    
  # μµμ… κ±°λ (.env μ—°λ™)
  options:
    enabled: ${OPTIONS_TRADING_ENABLED:-false}
    strategies: ${OPTIONS_STRATEGIES:-["covered_call", "protective_put"]}

# =====================================
# π“‹ μ‹μ¤ν… μ •λ³΄ λ° λ©”νƒ€λ°μ΄ν„°
# =====================================
system_info:
  # λ²„μ „ μ •λ³΄
  version: "3.0.0"
  build_date: "2025-07-01"
  
  # νΈν™μ„±
  python_version: ">=3.9"
  required_packages: "requirements.txt"
  
  # ν™κ²½ μ—°λ™
  env_file: ".env"
  config_validation: true
  
  # μµμ† μ”κµ¬μ‚¬ν•­
  requirements:
    memory_gb: 8
    storage_gb: 10
    cpu_cores: 4

# =====================================
# β… μ„¤μ • κ²€μ¦
# =====================================
validation:
  # ν•„μ ν™κ²½λ³€μ μ²΄ν¬
  required_env_vars:
    - 'ENVIRONMENT'
    - 'PROJECT_MODE'
    - 'MASTER_ENCRYPTION_KEY'
    - 'JWT_SECRET'
    
  # μ„ νƒμ  ν™κ²½λ³€μ (κΈ°λ³Έκ°’ μμ)
  optional_env_vars:
    - 'UPBIT_ACCESS_KEY'
    - 'UPBIT_SECRET_KEY'
    - 'IBKR_ACCOUNT_ID'
    - 'TELEGRAM_BOT_TOKEN'
    - 'TELEGRAM_CHAT_ID'
  
  # μ„¤μ • μ ν¨μ„± κ²€μ‚¬
  validation_rules:
    - 'confidence_thresholds_range'
    - 'allocation_sum_equals_one'
    - 'risk_limits_logical'
    - 'file_paths_exist'

# =====================================
# π“– μ‚¬μ© κ°€μ΄λ“
# =====================================
# 
# μ΄ μ„¤μ • νμΌ μ‚¬μ©λ²•:
# 
# 1. ν™κ²½λ³€μ μ„¤μ •:
#    - .env νμΌμ— λ¨λ“  λ―Όκ°ν• μ •λ³΄ μ…λ ¥
#    - ${VAR_NAME} ν•μ‹μΌλ΅ μλ™ λ΅λ“
# 
# 2. μ„¤μ • λ΅λ“:
#    ```python
#    import yaml
#    from os import environ
#    
#    # ν™κ²½λ³€μ μΉν™κ³Ό ν•¨κ» λ΅λ“
#    with open('configs/settings.yaml', 'r') as f:
#        config = yaml.safe_load(f)
#    ```
# 
# 3. λ‹¨κ³„λ³„ ν™μ„±ν™”:
#    - κ°λ° λ‹¨κ³„: paper_trading=true, κΈ°λ³Έ μ „λµλ§
#    - ν…μ¤νΈ λ‹¨κ³„: λ°±ν…μ¤ν…, μ„±λ¥ κ²€μ¦
#    - ν”„λ΅λ•μ…: μ μ§„μ  μ‹¤κ±°λ μ „ν™
# 
# 4. λ¨λ‹ν„°λ§:
#    - λ΅κ·Έ νμΌ μ •κΈ° ν™•μΈ
#    - μ„±λ¥ μ§€ν‘ λ¨λ‹ν„°λ§
#    - μ•λ¦Ό μ‹μ¤ν… ν™μ©
# 
# β οΈ μ¤‘μ” μ‚¬ν•­:
# - μ‹¤κ±°λ μ „ μ¶©λ¶„ν• ν…μ¤νΈ ν•„μ
# - API ν‚¤ λ³΄μ• μ² μ €ν κ΄€λ¦¬
# - μ •κΈ°μ μΈ λ°±μ—… λ° μ—…λ°μ΄νΈ
# - λ¦¬μ¤ν¬ κ΄€λ¦¬ μ„¤μ • μ¤€μ
# 
# π”— μ—°λ™ νμΌ:
# - .env.example: ν™κ²½λ³€μ ν…ν”λ¦Ώ
# - .gitignore: λ³΄μ• νμΌ μ μ™Έ
# - requirements.txt: μμ΅΄μ„± ν¨ν‚¤μ§€
# 
# =====================================
# π μµκ³ ν€ΈνΈν”„λ΅μ νΈ - μ„¤μ • μ™„λ£!
# =====================================
